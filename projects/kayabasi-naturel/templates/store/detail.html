{% extends 'base.html' %}

{% block content %}
  <div class="container py-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'store:index' %}">Ana Sayfa</a></li>
        {% if product.category %}
          <li class="breadcrumb-item">
            <a href="{% url 'store:category_products' 'ari' %}">{{ product.category.name }}</a>
          </li>
        {% endif %}
        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
      </ol>
    </nav>

    <div class="row g-5">
      <!-- ÃœrÃ¼n GÃ¶rseli -->
      <div class="col-lg-6">
        <div class="card shadow-sm border-0">
          {% if product.image %}
            <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}" style="border-radius: 8px;">
          {% else %}
            <img src="https://placehold.co/800x600?text=ÃœrÃ¼n+GÃ¶rseli" class="card-img-top" alt="{{ product.name }}" style="border-radius: 8px;">
          {% endif %}
        </div>
        
        <!-- ÃœrÃ¼n Ã–zellikleri -->
        <div class="card mt-4 border-0 bg-light">
          <div class="card-body">
            <h5 class="card-title mb-3"><i class="fas fa-info-circle"></i> ÃœrÃ¼n Ã–zellikleri</h5>
            <ul class="list-unstyled mb-0">
              <li class="mb-2"><strong>Kategori:</strong> {{ product.category.name|default:"Genel" }}</li>
              <li class="mb-2"><strong>Stok Durumu:</strong> 
                {% if product.stock > 10 %}
                  <span class="badge bg-success">Stokta Var</span>
                {% elif product.stock > 0 %}
                  <span class="badge bg-warning text-dark">Son {{ product.stock }} ÃœrÃ¼n</span>
                {% else %}
                  <span class="badge bg-danger">Stokta Yok</span>
                {% endif %}
              </li>
              {% if product.weight %}
                <li class="mb-2"><strong>Net AÄŸÄ±rlÄ±k:</strong> {{ product.weight }}</li>
              {% endif %}
              {% if product.production_location %}
                <li class="mb-2"><strong>Ãœretim Yeri:</strong> {{ product.production_location }}</li>
              {% endif %}
              {% if product.shelf_life %}
                <li class="mb-2"><strong>Raf Ã–mrÃ¼:</strong> {{ product.shelf_life }}</li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div>

      <!-- ÃœrÃ¼n Bilgileri ve SatÄ±n Alma -->
      <div class="col-lg-6">
        <!-- ÃœrÃ¼n BaÅŸlÄ±ÄŸÄ± ve Fiyat -->
        <div class="mb-4">
          {% if product.category %}
            <span class="badge bg-success mb-2">{{ product.category.name }}</span>
          {% endif %}
          <h1 class="display-5 mb-3">{{ product.name }}</h1>
          <div class="d-flex align-items-center mb-3">
            <span class="display-4 text-success fw-bold">{{ product.price }} TL</span>
            <span class="text-muted ms-2">/ adet</span>
          </div>
        </div>

        <!-- ÃœrÃ¼n AÃ§Ä±klamasÄ± -->
        <div class="mb-4">
          <h5 class="mb-3">ÃœrÃ¼n AÃ§Ä±klamasÄ±</h5>
          <p class="text-muted lh-lg">{{ product.description }}</p>
        </div>

        <!-- Ã–ne Ã‡Ä±kan Ã–zellikler -->
        <div class="mb-4">
          <h5 class="mb-3">Ã–ne Ã‡Ä±kan Ã–zellikler</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> %100 DoÄŸal ve Organik</li>
            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> KatkÄ±sÄ±z ve Ä°ÅŸlenmemiÅŸ</li>
            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Ãœretici Garantili</li>
            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Ä°zlenebilir Ãœretim</li>
            <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> HÄ±zlÄ± Kargo ile Teslim</li>
          </ul>
        </div>

        <!-- Sepete Ekleme Formu -->
        <div class="card border-success mb-4">
          <div class="card-body">
            <form method="post" action="{% url 'store:add_to_cart' product.slug %}">
              {% csrf_token %}
              <div class="row g-3 align-items-end">
                <div class="col-md-4">
                  <label for="qty" class="form-label fw-bold">Adet SeÃ§in</label>
                  <input id="qty" name="quantity" type="number" min="1" max="{{ product.stock }}" value="1" class="form-control form-control-lg">
                </div>
                <div class="col-md-8">
                  <button type="submit" class="btn btn-success btn-lg w-100" {% if product.stock == 0 %}disabled{% endif %}>
                    <i class="fas fa-shopping-cart me-2"></i>Sepete Ekle
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Ek Bilgiler -->
        <div class="alert alert-info border-0">
          <h6 class="alert-heading"><i class="fas fa-truck me-2"></i>Teslimat Bilgisi</h6>
          <p class="mb-0 small">SipariÅŸiniz Ã¶zenle paketlenir ve 2-3 iÅŸ gÃ¼nÃ¼ iÃ§inde kargoya verilir.</p>
        </div>

        <div class="d-flex gap-2">
          <a href="{% url 'store:view_cart' %}" class="btn btn-outline-secondary">
            <i class="fas fa-shopping-basket me-2"></i>Sepeti GÃ¶rÃ¼ntÃ¼le
          </a>
          <a href="javascript:history.back()" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>Geri DÃ¶n
          </a>
        </div>
      </div>
    </div>

    <!-- Ãœretim SÃ¼reci ve DetaylÄ± Bilgiler -->
    <div class="row mt-5">
      <div class="col-12">
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4">
            <h4 class="mb-4">ÃœrÃ¼n HakkÄ±nda DetaylÄ± Bilgi</h4>
            
            <!-- Ãœretim SÃ¼reci -->
            {% if product.production_process %}
            <div class="mb-4">
              <h5 class="text-success mb-3">ğŸ­ Ãœretim SÃ¼reci</h5>
              <p class="text-muted">{{ product.production_process|linebreaks }}</p>
            </div>
            {% endif %}
            
            <!-- Ä°Ã§erik Bilgisi -->
            {% if product.ingredients %}
            <div class="mb-4">
              <h5 class="text-success mb-3">ğŸ“‹ Ä°Ã§erik Bilgisi</h5>
              <p class="text-muted">{{ product.ingredients|linebreaks }}</p>
            </div>
            {% endif %}
            
            <!-- Saklama KoÅŸullarÄ± -->
            {% if product.storage_conditions %}
            <div class="mb-4">
              <h5 class="text-success mb-3">ğŸŒ¡ï¸ Saklama KoÅŸullarÄ±</h5>
              <p class="text-muted">{{ product.storage_conditions|linebreaks }}</p>
            </div>
            {% endif %}
            
            <!-- Sertifikalar -->
            {% if product.certificates %}
            <div class="mb-4">
              <h5 class="text-success mb-3">ğŸ† Sertifikalar ve Belgeler</h5>
              <p class="text-muted">{{ product.certificates|linebreaks }}</p>
            </div>
            {% endif %}
            
            <!-- Genel Bilgiler -->
            <div class="row mt-4">
              <div class="col-md-6 mb-3">
                <h6 class="text-success">ğŸŒ± DoÄŸal Ãœretim</h6>
                <p class="text-muted small">KayabaÅŸÄ± Naturel Ã¼rÃ¼nleri, hiÃ§bir kimyasal katkÄ± maddesi kullanÄ±lmadan, geleneksel yÃ¶ntemlerle Ã¼retilir. ÃœrÃ¼nlerimiz tamamen doÄŸal ve katkÄ±sÄ±zdÄ±r.</p>
              </div>
              <div class="col-md-6 mb-3">
                <h6 class="text-success">ğŸ“ Ä°zlenebilir Kaynak</h6>
                <p class="text-muted small">Her Ã¼rÃ¼nÃ¼mÃ¼zÃ¼n kaynaÄŸÄ± bellidir. Milas, MuÄŸla'daki kendi tarlalarÄ±mÄ±zdan gelen Ã¼rÃ¼nlerimizin Ã¼retim sÃ¼reci tamamen ÅŸeffaftÄ±r.</p>
              </div>
              <div class="col-md-6 mb-3">
                <h6 class="text-success">âœ“ Kalite Garantisi</h6>
                <p class="text-muted small">25 yÄ±llÄ±k Ã¼retim tecrÃ¼besi ile kalite standartlarÄ±mÄ±zdan Ã¶dÃ¼n vermeden, her Ã¼rÃ¼nÃ¼ titizlikle kontrol ediyoruz.</p>
              </div>
              <div class="col-md-6 mb-3">
                <h6 class="text-success">ğŸšš GÃ¼venli Teslimat</h6>
                <p class="text-muted small">ÃœrÃ¼nleriniz Ã¶zel ambalajlarda, en kÄ±sa sÃ¼rede ve en gÃ¼venli ÅŸekilde adresinize teslim edilir.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
