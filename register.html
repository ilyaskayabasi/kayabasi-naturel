<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kayıt Ol - Lezzet</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/templatemo-style.css">
  </head>
  <body>
    <div class="header">
      <div class="container">
        <a href="index.html" class="navbar-brand">Lezzet</a>
        <ul id="auth-links" class="nav navbar-nav navbar-right"></ul>
      </div>
    </div>

    <main class="container" style="max-width:560px;margin-top:60px;">
      <h2>Kayıt Ol</h2>
      <div id="msg" role="status" style="margin-bottom:12px;color:#b00"></div>
      <form id="register-form">
        <div class="form-group">
          <label for="username">Kullanıcı Adı</label>
          <input id="username" name="username" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="email">E-posta</label>
          <input id="email" name="email" type="email" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="password">Şifre</label>
          <input id="password" name="password" type="password" class="form-control" required>
        </div>
        <button class="btn btn-primary" type="submit">Kayıt Ol</button>
        <a href="login.html" class="btn btn-link">Zaten hesabınız var mı? Giriş yap</a>
      </form>
    </main>

    <script src="js/vendor/jquery-1.11.2.min.js"></script>
    <script src="js/auth.js"></script>
    <script>
      document.getElementById('register-form').addEventListener('submit', function(e){
        e.preventDefault();
        var u = document.getElementById('username').value;
        var em = document.getElementById('email').value;
        var p = document.getElementById('password').value;
        document.getElementById('msg').textContent = '';
        LezzetAuth.register({ username: u, email: em, password: p }).then(function(res){
          if(res.ok){ window.location.href = 'index.html'; } else { document.getElementById('msg').textContent = res.message; }
        }).catch(function(err){ document.getElementById('msg').textContent = 'Kayıt sırasında hata oluştu.'; console.error(err); });
      });
    </script>
  </body>
</html>
