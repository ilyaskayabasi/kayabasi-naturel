<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Giriş Yap - Lezzet</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/templatemo-style.css">
  </head>
  <body>
    <div class="header">
      <div class="container">
        <a href="index.html" class="navbar-brand">Lezzet</a>
        <ul id="auth-links" class="nav navbar-nav navbar-right"></ul>
      </div>
    </div>

    <main class="container" style="max-width:560px;margin-top:60px;">
      <h2>Giriş Yap</h2>
      <div id="msg" role="status" style="margin-bottom:12px;color:#b00"></div>
      <form id="login-form">
        <div class="form-group">
          <label for="identifier">E-posta veya Kullanıcı Adı</label>
          <input id="identifier" name="identifier" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="password">Şifre</label>
          <input id="password" name="password" type="password" class="form-control" required>
        </div>
        <button class="btn btn-primary" type="submit">Giriş Yap</button>
        <a href="register.html" class="btn btn-link">Hesabınız yok mu? Kayıt olun</a>
      </form>
    </main>

    <script src="js/vendor/jquery-1.11.2.min.js"></script>
    <script src="js/auth.js"></script>
    <script>
      document.getElementById('login-form').addEventListener('submit', function(e){
        e.preventDefault();
        var id = document.getElementById('identifier').value;
        var p = document.getElementById('password').value;
        document.getElementById('msg').textContent = '';
        LezzetAuth.login({ identifier: id, password: p }).then(function(res){
          if(res.ok){ window.location.href = 'index.html'; } else { document.getElementById('msg').textContent = res.message; }
        }).catch(function(err){ document.getElementById('msg').textContent = 'Giriş sırasında hata oluştu.'; console.error(err); });
      });
    </script>
  </body>
</html>
